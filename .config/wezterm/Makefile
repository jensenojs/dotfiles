.PHONY: help format check clean

# é»˜è®¤ç›®æ ‡
help:
	@echo "WezTerm é…ç½®ç®¡ç†"
	@echo ""
	@echo "å¯ç”¨å‘½ä»¤:"
	@echo "  make format    - æ ¼å¼åŒ–æ‰€æœ‰ Lua æ–‡ä»¶"
	@echo "  make check     - æ£€æŸ¥æ ¼å¼ä½†ä¸ä¿®æ”¹"
	@echo "  make clean     - æ¸…ç†ä¸´æ—¶æ–‡ä»¶"
	@echo "  make validate  - éªŒè¯ WezTerm é…ç½®"

# æ ¼å¼åŒ–æ‰€æœ‰ Lua æ–‡ä»¶
format:
	@echo "ğŸ¨ æ ¼å¼åŒ– Lua ä»£ç ..."
	@stylua --config-path .stylua.toml .
	@echo "âœ… æ ¼å¼åŒ–å®Œæˆ"

# æ£€æŸ¥æ ¼å¼ï¼ˆä¸ä¿®æ”¹ï¼‰
check:
	@echo "ğŸ” æ£€æŸ¥ä»£ç æ ¼å¼..."
	@stylua --config-path .stylua.toml --check .
	@echo "âœ… æ ¼å¼æ£€æŸ¥å®Œæˆ"

# éªŒè¯ WezTerm é…ç½®
validate:
	@echo "ğŸ”§ éªŒè¯ WezTerm é…ç½®..."
	@wezterm --config-file wezterm.lua --version > /dev/null && echo "âœ… é…ç½®æœ‰æ•ˆ" || echo "âŒ é…ç½®æ— æ•ˆ"

# æ¸…ç†ä¸´æ—¶æ–‡ä»¶
clean:
	@echo "ğŸ§¹ æ¸…ç†ä¸´æ—¶æ–‡ä»¶..."
	@find . -name "*.bak" -delete
	@find . -name "*~" -delete
	@echo "âœ… æ¸…ç†å®Œæˆ"
